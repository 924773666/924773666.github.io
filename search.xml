<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>PLSQL简单入门</title>
      <link href="/2022/10/30/oracle01/"/>
      <url>/2022/10/30/oracle01/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="PL-SQL简单入门"><a href="#PL-SQL简单入门" class="headerlink" title="PL/SQL简单入门"></a><center>PL/SQL简单入门</center></h1><h2 id="1-预定义异常"><a href="#1-预定义异常" class="headerlink" title="1.预定义异常"></a>1.预定义异常</h2><table>    <tr>        <td>命名的系统异常</td>        <td>产生的原因</td>    </tr>    <tr>        <td>ACCESS_INTO_NULL</td>        <td>未定义的对象</td>    </tr>    <tr>        <td>CASE_NOT_FOUND</td>        <td>CASE中若未包含相应的THEN，并且没有设置ELSE时</td>    </tr>    <tr>        <td>COLLECTION_IS_NULL</td>        <td>集合元素未初始化</td>    </tr>    <tr>        <td>CURSER_ALREADY_OPEN</td>        <td>游标已经打开</td>    </tr>    <tr>        <td>DUP_VAL_ON_INDEX</td>        <td>唯一索引对应的列上有重复的值</td>    </tr>    <tr>        <td>INVALID_CURSOR</td>        <td>在不合法的游标上进行操作</td>    </tr>    <tr>        <td>INVALID_NUMBER</td>        <td>内嵌的SQL语句不能将字符转换成数字</td>    </tr>    <tr>        <td><strong>NO_DATA_FOUND</strong></td>        <td><strong>使用select into 未返回行</strong></td>    </tr>    <tr>        <td><strong>TOO_MANY_ROWS</strong></td>        <td><strong>执行select into 时，结果集超过一行</strong></td>    </tr>    <tr>        <td>ZERO_DIVIDE</td>        <td>除数为0</td>    </tr>    <tr>        <td>SUBSCRIPT_BEYOND_COUNT</td>        <td>元素下标超过嵌套表或VARRAY的最大值</td>    </tr>    <tr>        <td>SUBSCRIPT_OUTSIDE_LIMIT</td>        <td>使用嵌套表或VARRAY时，将下标指定为负数</td>    </tr>    <tr>        <td>VALUE_ERROR</td>        <td>赋值时，变量长度不足以容纳实际数据</td>    </tr>    <tr>        <td>LOGIN_DENIED</td>        <td>PL/SQL，应用程序连接到oracle数据库时，提供了不正确的用户名或密码</td>    </tr>    <tr>        <td>NOT_LOGGED_ON</td>        <td>PL/SQL，应用程序在没有连接oracle数据库的情况下访问数据</td>    </tr>    <tr>        <td>PROGRAN_ERROR</td>        <td>PL/SQL，内部问题，可能需要重装数据字典 和 PL/SQL系统包 </td>    </tr>    <tr>        <td>ROWTYPE_MISMATCH</td>        <td>宿主游标变量与PL/SQL游标变量的返回类型不兼容</td>    </tr>    <tr>        <td>SELF_IS_NULL</td>        <td>使用对象类型时，在null对象上调用对象方法</td>    </tr>    <tr>        <td>STORAGE_ERROR</td>        <td>运行PL/SQL时，超出内存空间</td>    </tr>    <tr>        <td>SYS_INVALID_ID</td>        <td>无效rowid字符串</td>    </tr>    <tr>        <td>TIMEOUT_ON_RESOURCE</td>        <td>oracle在等待资源时超时</td>    </tr> </table><h3 id="1-1异常语法结构"><a href="#1-1异常语法结构" class="headerlink" title="1.1异常语法结构"></a>1.1异常语法结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXCEPTION</span><br><span class="line">WHEN 异常类型 THEN</span><br><span class="line">处理逻辑</span><br></pre></td></tr></table></figure><h2 id="2-条件判断"><a href="#2-条件判断" class="headerlink" title="2.条件判断"></a>2.条件判断</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">IF 条件 THEN</span><br><span class="line">业务</span><br><span class="line">ELSE IF</span><br><span class="line">业务</span><br><span class="line">ELSE</span><br><span class="line">业务</span><br><span class="line">END IF;</span><br></pre></td></tr></table></figure><h2 id="3-循环"><a href="#3-循环" class="headerlink" title="3.循环"></a>3.循环</h2><h3 id="3-1-无条件循环"><a href="#3-1-无条件循环" class="headerlink" title="3.1 无条件循环"></a>3.1 无条件循环</h3><h4 id="3-1-1-结构"><a href="#3-1-1-结构" class="headerlink" title="3.1.1 结构"></a>3.1.1 结构</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LOOP</span><br><span class="line">业务</span><br><span class="line">END LOOP;</span><br></pre></td></tr></table></figure><h4 id="3-1-2-例子"><a href="#3-1-2-例子" class="headerlink" title="3.1.2 例子"></a>3.1.2 例子</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">  V_NUM NUMBER:=1;</span><br><span class="line">BEGIN</span><br><span class="line">  LOOP</span><br><span class="line">    DBMS_OUTPUT.put_line(V_NUM);</span><br><span class="line">    V_NUM:=V_NUM+1;</span><br><span class="line">    EXIT WHEN V_NUM&gt;100;</span><br><span class="line">  END LOOP;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h3 id="3-2-条件循环"><a href="#3-2-条件循环" class="headerlink" title="3.2 条件循环"></a>3.2 条件循环</h3><h4 id="3-2-1-结构"><a href="#3-2-1-结构" class="headerlink" title="3.2.1 结构"></a>3.2.1 结构</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">WHILE条件</span><br><span class="line">LOOP</span><br><span class="line">业务</span><br><span class="line">END LOOP;</span><br></pre></td></tr></table></figure><h4 id="3-2-2-例子"><a href="#3-2-2-例子" class="headerlink" title="3.2.2 例子"></a>3.2.2 例子</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">  V_NUM NUMBER:=1;</span><br><span class="line">BEGIN</span><br><span class="line">  WHILE V_NUM&lt;=100</span><br><span class="line">  LOOP</span><br><span class="line">    DBMS_OUTPUT.put_line(V_NUM);</span><br><span class="line">    V_NUM:=V_NUM+1;</span><br><span class="line">  END LOOP;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h3 id="3-3-FOR循环"><a href="#3-3-FOR循环" class="headerlink" title="3.3 FOR循环"></a>3.3 FOR循环</h3><h4 id="3-3-1-结构"><a href="#3-3-1-结构" class="headerlink" title="3.3.1 结构"></a>3.3.1 结构</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FOR 变量 IN  初始值..终止值   -- IN 后+REVERSE降序  默认升序</span><br><span class="line"> LOOP</span><br><span class="line">业务</span><br><span class="line">END LOOP;</span><br></pre></td></tr></table></figure><h4 id="3-3-2-例子"><a href="#3-3-2-例子" class="headerlink" title="3.3.2 例子"></a>3.3.2 例子</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">  V_NUM NUMBER:=1;</span><br><span class="line">BEGIN</span><br><span class="line">  FOR V_NUM  IN REVERSE  5..100</span><br><span class="line">  LOOP</span><br><span class="line">    DBMS_OUTPUT.put_line(V_NUM);</span><br><span class="line">  END LOOP;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h2 id="4-游标"><a href="#4-游标" class="headerlink" title="4.游标"></a>4.游标</h2><p>是系统为用户开设的一个数据缓冲区，存放sql语句执行的结果。我们可以把游标理解为PL/SQL中的结果集。</p><h3 id="4-1-结构"><a href="#4-1-结构" class="headerlink" title="4.1 结构"></a>4.1 结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">--声明</span><br><span class="line">CURSOR 游标名称 IS SQL语句；</span><br><span class="line">--使用</span><br><span class="line">OPEN 游标名称;</span><br><span class="line">LOOP</span><br><span class="line">FETCH 游标名称 INTO 变量--FETCH类似于提取</span><br><span class="line">EXIT WHEN 游标名称%NOTFOUND</span><br><span class="line">END LOOP;</span><br><span class="line">CLOSE 游标名称;</span><br></pre></td></tr></table></figure><h3 id="4-2-例子"><a href="#4-2-例子" class="headerlink" title="4.2 例子"></a>4.2 例子</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--游标输出结果</span><br><span class="line">DECLARE</span><br><span class="line"> CURSOR CUR_PRICETABLE IS SELECT * FROM T_PRICETABLE WHERE OWNERTYPEID=1;</span><br><span class="line"> V_PRICETABLE T_PRICETABLE%ROWTYPE;</span><br><span class="line">BEGIN</span><br><span class="line">  OPEN CUR_PRICETABLE;  </span><br><span class="line">       LOOP </span><br><span class="line">        FETCH CUR_PRICETABLE INTO V_PRICETABLE;</span><br><span class="line">        EXIT WHEN CUR_PRICETABLE%NOTFOUND;</span><br><span class="line">        DBMS_OUTPUT.put_line(V_PRICETABLE.PRICE);</span><br><span class="line">       END LOOP;</span><br><span class="line">  CLOSE CUR_PRICETABLE;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h3 id="4-3-带参数的游标"><a href="#4-3-带参数的游标" class="headerlink" title="4.3 带参数的游标"></a>4.3 带参数的游标</h3><h4 id="4-3-1-例子"><a href="#4-3-1-例子" class="headerlink" title="4.3.1 例子"></a>4.3.1 例子</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">--游标输出结果</span><br><span class="line">DECLARE</span><br><span class="line"> V_MAXNUM NUMBER:=9;</span><br><span class="line"> CURSOR CUR_PRICETABLE(v_ownertype number,V_MINNUM NUMBER) IS </span><br><span class="line">        SELECT * FROM T_PRICETABLE WHERE OWNERTYPEID=v_ownertype AND MINNUM BETWEEN V_MINNUM AND V_MAXNUM;</span><br><span class="line"> V_PRICETABLE T_PRICETABLE%ROWTYPE;</span><br><span class="line">BEGIN</span><br><span class="line">  OPEN CUR_PRICETABLE(1,5);  </span><br><span class="line">       LOOP </span><br><span class="line">        FETCH CUR_PRICETABLE INTO V_PRICETABLE;</span><br><span class="line">        EXIT WHEN CUR_PRICETABLE%NOTFOUND;</span><br><span class="line">        DBMS_OUTPUT.put_line(V_PRICETABLE.PRICE);</span><br><span class="line">       END LOOP;</span><br><span class="line">  CLOSE CUR_PRICETABLE;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h3 id="4-4-for循环-带参数游标"><a href="#4-4-for循环-带参数游标" class="headerlink" title="4.4 for循环 带参数游标"></a>4.4 for循环 带参数游标</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DECLARE</span><br><span class="line"> V_MAXNUM NUMBER:=9;</span><br><span class="line"> CURSOR CUR_PRICETABLE(v_ownertype number,V_MINNUM NUMBER) IS </span><br><span class="line">        SELECT * FROM T_PRICETABLE WHERE OWNERTYPEID=v_ownertype AND MINNUM BETWEEN V_MINNUM AND V_MAXNUM;</span><br><span class="line">BEGIN</span><br><span class="line">FOR V_PRICETABLE IN CUR_PRICETABLE(1,5) </span><br><span class="line">       LOOP </span><br><span class="line">        DBMS_OUTPUT.put_line(V_PRICETABLE.PRICE);</span><br><span class="line">       END LOOP;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h2 id="5-存储函数"><a href="#5-存储函数" class="headerlink" title="5.存储函数"></a>5.存储函数</h2><ul><li>自定义函数</li></ul><h3 id="5-1-语法结构"><a href="#5-1-语法结构" class="headerlink" title="5.1 语法结构"></a>5.1 语法结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE[OR REPLACE] FUNCTION 函数名</span><br><span class="line">--（参数名称 参数类型，参数名称 参数类型）</span><br><span class="line">RETURN 结果变量数据类型</span><br><span class="line">IS</span><br><span class="line">变量声明部分;</span><br><span class="line">BEGIN</span><br><span class="line">业务;</span><br><span class="line">RETURN 结果变量;</span><br><span class="line">EXCEPTION </span><br><span class="line">异常处理;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h3 id="5-2-例子"><a href="#5-2-例子" class="headerlink" title="5.2 例子"></a>5.2 例子</h3><p>根据地址ID查询地址名称</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create or replace function XIAHAO.fn_getaddress(v_id number)</span><br><span class="line">return  t_address.name%type</span><br><span class="line">is</span><br><span class="line">v_name t_address.name%type;</span><br><span class="line">begin</span><br><span class="line">  select  name into v_name from t_address where id=v_id;</span><br><span class="line">exception</span><br><span class="line">  when NO_DATA_FOUND then</span><br><span class="line">  v_name:=&#x27;未查询到&#x27;;</span><br><span class="line">return v_name;</span><br><span class="line">end;</span><br></pre></td></tr></table></figure><h2 id="6-存储过程"><a href="#6-存储过程" class="headerlink" title="6.存储过程"></a>6.存储过程</h2><p>PL/SQL块，存储于数据库中，是数据库对象的一种，应用程序可以调用存储过程，执行相应逻辑。</p><h3 id="6-1和函数的区别"><a href="#6-1和函数的区别" class="headerlink" title="6.1和函数的区别"></a>6.1和函数的区别</h3><ul><li>函数有返回值，且必须返回；而存储过程没有返回值，可以通过传出参数返回多个值。</li><li>函数可以在select中直接使用，存储过程不行。过程多数是被应用程序所调用。</li><li>函数一般封装一个查询结果，存储过程一般都封装一段事务代码。</li></ul><h3 id="6-2结构"><a href="#6-2结构" class="headerlink" title="6.2结构"></a>6.2结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE [OR REPLACE] PROCEDURE 存储过程名称</span><br><span class="line">(参数名 类型，参数名 类型)</span><br><span class="line">IS|AS</span><br><span class="line">变量声明;</span><br><span class="line">BEGIN </span><br><span class="line">业务;</span><br><span class="line">EXCEPTION</span><br><span class="line">处理;</span><br><span class="line">END ;</span><br></pre></td></tr></table></figure><ul><li>过程参数的三种模式：<ul><li>IN 传入参数 默认</li><li>OUT 传出参数，返回程序运行结果</li><li>IN OUT 传入传出参数 </li></ul></li></ul><h3 id="6-3-例子"><a href="#6-3-例子" class="headerlink" title="6.3 例子"></a>6.3 例子</h3><h4 id="6-3-1-创建不带传出参数的存储过程：添加业主信息"><a href="#6-3-1-创建不带传出参数的存储过程：添加业主信息" class="headerlink" title="6.3.1 创建不带传出参数的存储过程：添加业主信息"></a>6.3.1 创建不带传出参数的存储过程：添加业主信息</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE PROCEDURE XIAHAO.PRO_OWNERS_ADD</span><br><span class="line">(</span><br><span class="line">V_NAME VARCHAR2, --名称</span><br><span class="line">V_ADDRESSID NUMBER, --地址id</span><br><span class="line">V_HOUSENUMBER VARCHAR2,  --门牌号</span><br><span class="line">V_WATERMETER VARCHAR2, --水表号</span><br><span class="line">V_OWNERTYPEID NUMBER  --业主类型id</span><br><span class="line">)</span><br><span class="line">IS</span><br><span class="line">BEGIN</span><br><span class="line">  INSERT INTO T_OWNERS</span><br><span class="line">  VALUES(seq_owners.nextval,V_NAME,V_ADDRESSID,V_HOUSENUMBER,V_WATERMETER,SYSDATE,V_OWNERTYPEID);</span><br><span class="line">  COMMIT; </span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h4 id="6-3-2-创建带传出参数的存储过程：传出新增业主的id"><a href="#6-3-2-创建带传出参数的存储过程：传出新增业主的id" class="headerlink" title="6.3.2 创建带传出参数的存储过程：传出新增业主的id"></a>6.3.2 创建带传出参数的存储过程：传出新增业主的id</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE PROCEDURE XIAHAO.PRO_OUT_OWNERS_ADD</span><br><span class="line">(</span><br><span class="line">V_NAME VARCHAR2, --名称</span><br><span class="line">V_ADDRESSID NUMBER, --地址id</span><br><span class="line">V_HOUSENUMBER VARCHAR2,  --门牌号</span><br><span class="line">V_WATERMETER VARCHAR2, --水表号</span><br><span class="line">V_OWNERTYPEID NUMBER,  --业主类型id</span><br><span class="line">V_ID OUT NUMBER </span><br><span class="line">)</span><br><span class="line">IS</span><br><span class="line">BEGIN</span><br><span class="line">  SELECT seq_owners.nextval INTO V_ID FROM DUAL;</span><br><span class="line">  INSERT INTO T_OWNERS</span><br><span class="line">  VALUES(V_ID,V_NAME,V_ADDRESSID,V_HOUSENUMBER,V_WATERMETER,SYSDATE,V_OWNERTYPEID);</span><br><span class="line">  COMMIT; </span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h3 id="6-4-调用"><a href="#6-4-调用" class="headerlink" title="6.4 调用"></a>6.4 调用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">CALL XIAHAO.PRO_OWNERS_ADD(&#x27;瞿夏浩&#x27;,6,&#x27;6-1&#x27;,&#x27;30454&#x27;,3);</span><br><span class="line"></span><br><span class="line">--或者使用PLSQL</span><br><span class="line">declare</span><br><span class="line">BEGIN </span><br><span class="line">xiahao.PRO_OWNERS_ADD(&#x27;瞿夏浩1&#x27;,6,&#x27;6-1&#x27;,&#x27;30454&#x27;,3,v_id);</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--调用有out的存储过程</span><br><span class="line">declare</span><br><span class="line">v_id number;</span><br><span class="line">BEGIN </span><br><span class="line">xiahao.PRO_OUT_OWNERS_ADD(&#x27;瞿夏浩1&#x27;,6,&#x27;6-1&#x27;,&#x27;30454&#x27;,3,v_id);</span><br><span class="line">dbms_output.put_line(v_id);</span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h2 id="7-触发器"><a href="#7-触发器" class="headerlink" title="7.触发器"></a>7.触发器</h2><p>和表相关联，存储的PL/SQL程序，每当一个特定的数据操作语句，（insert，update，delete）在指定的表上发出时，oracle自动执行触发器中定义的语句序列。</p><h3 id="7-1-作用于"><a href="#7-1-作用于" class="headerlink" title="7.1 作用于"></a>7.1 作用于</h3><ul><li>数据确认</li><li>实施复杂的安全检查</li><li>做审计，跟踪表上所作的数据操作等</li><li>数据的备份和同步</li></ul><h3 id="7-2-触发器的分类"><a href="#7-2-触发器的分类" class="headerlink" title="7.2 触发器的分类"></a>7.2 触发器的分类</h3><ul><li>前置触发器 (BEFORE)</li><li>后置触发器(AFTER)</li></ul><h3 id="7-3-创建触发器"><a href="#7-3-创建触发器" class="headerlink" title="7.3 创建触发器"></a>7.3 创建触发器</h3><h4 id="7-3-1语法"><a href="#7-3-1语法" class="headerlink" title="7.3.1语法"></a>7.3.1语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE TRIGGER 触发器名称</span><br><span class="line">BEFORE | AFTER</span><br><span class="line">[DELETE][[OR][INSERT]] [[OR]UPDATE [OF 列名]]</span><br><span class="line">ON 表名</span><br><span class="line">[FOR EACH ROW ] [WHEN (条件)]</span><br><span class="line">DECLARE</span><br><span class="line">...</span><br><span class="line">BEGIN</span><br><span class="line">PLSQL块</span><br><span class="line">END;</span><br><span class="line">--FOR EACH ROW作用：标注此触发器是行级触发器   不写就是语句块触发器 </span><br></pre></td></tr></table></figure><h4 id="7-3-2-在触发器中出发语句于伪记录变量的值"><a href="#7-3-2-在触发器中出发语句于伪记录变量的值" class="headerlink" title="7.3.2 在触发器中出发语句于伪记录变量的值"></a>7.3.2 在触发器中出发语句于伪记录变量的值</h4><table>    <tr>        <td>触发语句</td>        <td>:old</td>        <td>:new</td>    </tr>    <tr>        <td>insert</td>        <td>所有字段都是空null</td>        <td>将要插入的数据</td>    </tr>    <tr>        <td>update</td>        <td>更新以前改行的值</td>        <td>更新后的值</td>    </tr>    <tr>        <td>delete</td>        <td>删除以前改行的数据</td>        <td>所有字段都为空null</td>    </tr></table>### 7.4 例子<h4 id="7-4-1-前置触发器"><a href="#7-4-1-前置触发器" class="headerlink" title="7.4.1 前置触发器"></a>7.4.1 前置触发器</h4><p>当用户输入本月累计表数据后，自动计算出本月使用数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE TRIGGER XIAHAO.TRI_ACCOUNT_UPDATENUM1</span><br><span class="line">BEFORE</span><br><span class="line">UPDATE OF NUM1</span><br><span class="line">ON XIAHAO.T_ACCOUNT</span><br><span class="line">FOR EACH ROW </span><br><span class="line">DECLARE</span><br><span class="line">BEGIN </span><br><span class="line">  :NEW.USENUM:=:NEW.NUM1-:NEW.NUM0;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h4 id="7-4-2-后置触发器"><a href="#7-4-2-后置触发器" class="headerlink" title="7.4.2 后置触发器"></a>7.4.2 后置触发器</h4><p>备份</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE TRIGGER TRI_WONERS_LOG</span><br><span class="line">AFTER </span><br><span class="line">UPDATE OF NAME </span><br><span class="line">ON T_OWNERS</span><br><span class="line">FOR EACH ROW </span><br><span class="line">DECLARE</span><br><span class="line"></span><br><span class="line">BEGIN</span><br><span class="line">INSERT INTO T_OWNERS_LOG VALUES(SYSDATE,:NEW.ID,:OLD.NAME,:NEW.NAME);</span><br><span class="line">--触发器不需要commit  </span><br><span class="line">END;</span><br></pre></td></tr></table></figure><h2 id="8-PACKAGE"><a href="#8-PACKAGE" class="headerlink" title="8.PACKAGE"></a>8.PACKAGE</h2><h3 id="8-1-创建包规范"><a href="#8-1-创建包规范" class="headerlink" title="8.1 创建包规范"></a>8.1 创建包规范</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE PACKAGE XIAHAO.PAC_TEST </span><br><span class="line">IS | AS</span><br><span class="line">--定义公用常量、变量、游标、过程、函数等  不能有实现</span><br><span class="line">  PROCEDURE PRO_OWNERS_ADD</span><br><span class="line">  (</span><br><span class="line">  V_NAME VARCHAR2,</span><br><span class="line">  V_ADDRESSID NUMBER,</span><br><span class="line">  V_HOUSENUMBER VARCHAR2,</span><br><span class="line">  V_WATERMETER VARCHAR2,</span><br><span class="line">  V_OWNERTYPEID NUMBER</span><br><span class="line">  );</span><br><span class="line">END PAC_TEST;</span><br></pre></td></tr></table></figure><h3 id="8-2-创建包体"><a href="#8-2-创建包体" class="headerlink" title="8.2 创建包体"></a>8.2 创建包体</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">create or replace package body XIAHAO.PAC_TEST</span><br><span class="line">is | AS</span><br><span class="line">--定义私有常量、变量、游标、过程、函数等</span><br><span class="line">实现公用过程和函数</span><br><span class="line">       PROCEDURE PRO_OWNERS_ADD</span><br><span class="line">        (</span><br><span class="line">        V_NAME VARCHAR2,</span><br><span class="line">        V_ADDRESSID NUMBER,</span><br><span class="line">        V_HOUSENUMBER VARCHAR2,</span><br><span class="line">        V_WATERMETER VARCHAR2,</span><br><span class="line">        V_OWNERTYPEID NUMBER</span><br><span class="line">        )</span><br><span class="line">        IS</span><br><span class="line">        BEGIN</span><br><span class="line">          INSERT INTO XIAHAO.T_OWNERS</span><br><span class="line">          VALUES(XIAHAO.seq_owners.nextval,V_NAME,V_ADDRESSID,V_HOUSENUMBER,V_WATERMETER,SYSDATE,V_OWNERTYPEID);</span><br><span class="line">          COMMIT; </span><br><span class="line">        END;</span><br><span class="line">end PAC_TEST;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PLSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>butterfly魔改拓展</title>
      <link href="/2022/10/28/butterfly01/"/>
      <url>/2022/10/28/butterfly01/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="使用拓展（外挂标签）"><a href="#使用拓展（外挂标签）" class="headerlink" title="使用拓展（外挂标签）"></a>使用拓展（外挂标签）</h3><ul><li>flip动画</li></ul><div class='wow animate__flip' data-wow-duration='' data-wow-delay='' data-wow-offset=''  data-wow-iteration='' ><div class="note green icon-padding modern"><i class="note-icon fas fa-fan"></i><p><code>flip</code>动画效果。</p></div></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__flip %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note green &#x27;fas fa-fan&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`flip`动画效果。</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><ul><li>zoomIn 动画效果，持续 5s，延时 5s，离底部 100 距离时启动，重复 2 次。</li></ul><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='2' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>动画效果，持续<code>5s</code>，延时<code>5s</code>，离底部<code>100</code>距离时启动，重复<code>2</code>次</p></div></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,2 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`动画效果，持续`5s`，延时`5s`，离底部`100`距离时启动，重复`2`次</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><ul><li>slideInRight 动画效果，持续 5s，延时 5s。</li></ul><div class='wow animate__slideInRight' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='' ><div class="note orange icon-padding modern"><i class="note-icon fas fa-car"></i><p><code>slideInRight</code>动画效果，持续<code>5s</code>，延时<code>5s</code>。</p></div></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__slideInRight,5s,5s %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note orange &#x27;fas fa-car&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`slideInRight`动画效果，持续`5s`，延时`5s`。</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><ul><li>heartBeat 动画效果，延时 5s，重复 2 次。此处注意不用的参数位置要留空，用逗号间隔。</li></ul><div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><code>heartBeat</code>动画效果，延时<code>5s</code>，重复<code>2</code>次。</p></div></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__heartBeat,,5s,,2 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note red &#x27;fas fa-battery-half&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`heartBeat`动画效果，延时`5s`，重复`2`次。</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> butterfly魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端学习的第一天</title>
      <link href="/2022/10/27/hexo01/"/>
      <url>/2022/10/27/hexo01/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前端基础"><a href="#前端基础" class="headerlink" title="前端基础"></a><div align='center'>前端基础</div></h1><div class='wow animate__zoomIn' data-wow-duration='1s' data-wow-delay='1s' data-wow-offset='100'  data-wow-iteration='1' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><h1 id="1-网页"><a href="#1-网页" class="headerlink" title="1.网页"></a>1.网页</h1></div></div><p>网站是网页集合</p><h2 id="2-浏览器"><a href="#2-浏览器" class="headerlink" title="2.浏览器"></a>2.浏览器</h2><h3 id="2-1浏览器内核"><a href="#2-1浏览器内核" class="headerlink" title="2.1浏览器内核"></a>2.1浏览器内核</h3><ul><li>IE        Trident</li><li>firfox   Gecko</li><li>Safari   Webkit</li><li>chrome/Opera Blink(是Webkit的分支)</li></ul><h2 id="3-Web标准"><a href="#3-Web标准" class="headerlink" title="3.Web标准"></a>3.Web标准</h2><p>由W3C组织和其他标准化组织制定的一系列标准的集合</p><h3 id="3-1构成"><a href="#3-1构成" class="headerlink" title="3.1构成"></a>3.1构成</h3><p>包括结构Structure、表现Presentation、行为Behavior</p><ul><li>结构：用于对网页元素进行整理和分类 html</li><li>表现：比用于设置网页元素的版式、颜色、大小等外观样式   css </li><li>行为：网页模型的定义及交互的编写，js</li></ul><h2 id="4-VScode基本使用"><a href="#4-VScode基本使用" class="headerlink" title="4.VScode基本使用"></a>4.VScode基本使用</h2><h3 id="4-1快捷键"><a href="#4-1快捷键" class="headerlink" title="4.1快捷键"></a>4.1快捷键</h3><p>ctrl+n 新建</p><p>ctrl+s 保存</p><p>ctrl+ ctrl- 缩放视图</p><p>!+Tab快速生成模板骨架</p><p>安装open in Browser插件 </p><ul><li>浏览器中预览  ctrl+b</li><li>shift+ctrl+b(其他浏览器)</li><li>修改默认浏览器 首选项—&gt;设置—&gt;Open-in-browser:Default中设置</li></ul><h2 id="5-常用标签"><a href="#5-常用标签" class="headerlink" title="5.常用标签"></a>5.常用标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span> <span class="comment">&lt;!--规范化--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><table>    <tr>        <td>语义</td>        <td>标签</td>        <td>说明</td>    </tr>    <tr>        <td><strong>加粗</strong></td>        <td>&lt;strong&gt;&lt;b&gt;</td>        <td>推荐使用strong</td>    </tr>    <tr>                <td><em>倾斜</em></td>        <td>em/i</td>        <td>推荐使用em</td>    </tr>    <tr>            <td><del>删除线</del></td>        <td>del/s</td>        <td>推荐使用del</td>    </tr>    <tr>            <td><ins>下划线</ins></td>        <td>ins/u</td>        <td>推荐使用ins</td>    </tr></table><div>这是一个盒子    <div>独占一行</div></div><span>这也是一个盒子</span> <span>这也是一个盒子</span> <span>一行可以放多个</span><h3 id="5-1图片标签"><a href="#5-1图片标签" class="headerlink" title="5.1图片标签"></a>5.1图片标签</h3><!--图像标签--><p><img src="/images/图像URL.jpg" title="图像URL" width="600px" height="50px" border="10"></img></p><p><img src="不显示图片.jpg" alt="图像URL"></img></p><table>    <tr>        <td>语义</td>        <td>属性值</td>        <td>说明</td>    </tr>    <tr>        <td>src</td>        <td>图片路径</td>        <td>必须属性</td>    </tr>    <tr>        <td>alt</td>        <td>文本</td>        <td>替换文本、图像不能显示的时候提示的文字</td>    </tr>    <tr>        <td>title</td>        <td>提示文本</td>        <td>提示文本，鼠标放到图像上，显示文字</td>    </tr>    <tr>        <td>width</td>        <td>像素</td>        <td>设置图像的宽度</td>    </tr>    <tr>        <td>height</td>        <td>像素</td>        <td>设置图像的高度</td>    </tr>    <tr>        <td>border</td>        <td>像素</td>        <td>设置图像的边框粗细大小</td>    </tr></table><h4 id="5-1-1图像路径"><a href="#5-1-1图像路径" class="headerlink" title="5.1.1图像路径"></a>5.1.1图像路径</h4><ul><li><p>相对路径：以引用文件所在的位置作为参考基础，从而建立出的目录路径</p><table>    <tr>        <td>相对路径分类</td>        <td>符号</td>        <td>说明</td>    </tr>    <tr>        <td>同一级路径</td>        <td></td>        <td>图像文件位于HTML文件同一级</td>    </tr>    <tr>            <td>下一级路径</td>        <td>/</td>        <td>图像文件位于HTML文件下一级</td>    </tr>    <tr>        <td>上一级路径</td>        <td>../</td>        <td>图像文件位于HTML文件上一级</td>    </tr></table></li><li><p>绝对路径</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
